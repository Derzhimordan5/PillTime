<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="PillTime.Views.EditMedicinePage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Title="Редактировать лекарство">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15">

            <!-- Название -->
            <Label Text="Название лекарства" />
            <Entry x:Name="NameEntry" Placeholder="Например, Парацетамол" />

            <!-- Режим приёма -->
            <Label Text="Режим приёма" />
            <Picker
        x:Name="ModePicker"
        Title="Выберите режим"
        SelectedIndexChanged="OnModeChanged">
                <Picker.ItemsSource>
                    <x:Array Type="{x:Type x:String}">
                        <x:String>По назначению врача</x:String>
                        <x:String>Самостоятельный курс</x:String>
                    </x:Array>
                </Picker.ItemsSource>
            </Picker>

            <!-- По назначению врача -->
            <VerticalStackLayout x:Name="DoctorBlock" IsVisible="False" Spacing="10">
                <Label Text="Единица измерения" />
                <Picker
          x:Name="DoctorUnitPicker"
          Title="Выберите единицу" />

                <Label Text="Приёмы в день" />
                <Entry
          x:Name="IntakesPerDayEntry"
          Keyboard="Numeric"
          Placeholder="Число приёмов"
          Completed="OnIntakesPerDayChanged" />



                <Label Text="Время и дозировка" />
                <ScrollView HeightRequest="150">
                    <VerticalStackLayout x:Name="DoctorScheduleStack" Spacing="10" />
                </ScrollView>

                <Label Text="Запас лекарства" />
                <Entry
          x:Name="StockEntry"
          Keyboard="Numeric"
          Placeholder="Количество в выбранной единице" />
            </VerticalStackLayout>

            <!-- Самостоятельный курс -->
            <VerticalStackLayout x:Name="SelfBlock" IsVisible="False" Spacing="10">
                <Label Text="Максимальная норма (мг/кг/сутки)" />
                <Entry x:Name="MaxDailyDosePerKgEntry" Keyboard="Numeric" Placeholder="например, 60" Unfocused="OnIntakesPerDaySelfChanged" Completed="OnIntakesPerDaySelfChanged" />

                <Label Text="Приёмы в день" />
                <Entry x:Name="IntakesPerDaySelfEntry" Keyboard="Numeric" Completed="OnIntakesPerDaySelfChanged" Unfocused="OnIntakesPerDaySelfChanged" />


                <Label Text="Время приёма (доза вычисляется автоматически)" />
                <ScrollView HeightRequest="150">
                    <VerticalStackLayout x:Name="SelfScheduleStack" Spacing="10" />
                </ScrollView>

                <Label Text="Запас препарата (мг)" />
                <Entry x:Name="StockSelfEntry" Keyboard="Numeric" Placeholder="например, 5000" />
            </VerticalStackLayout>
            <Label Text="Особые указания (например, после еды, запивать водой)" />
            <Entry x:Name="SpecialInstructionsEntry" Placeholder="Например, после еды" />

            <Button
        Text="Сохранить"
        FontAttributes="Bold"
        Clicked="OnSaveClicked" />
            <Button Text="Удалить"
        BackgroundColor="Red"
        TextColor="White"
        Clicked="OnDeleteClicked" />


        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
